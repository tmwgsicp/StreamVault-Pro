name: ðŸš€ Build and Release StreamVault Pro

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:
    inputs:
      version:
        description: 'Release version (e.g., v2.0.0)'
        required: true
        default: 'v2.0.0'

permissions:
  contents: write

jobs:
  release:
    name: ðŸŽ‰ Create Release
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ðŸ“ Generate Release Notes
        id: release_notes
        run: |
          echo "## ðŸš€ StreamVault Pro ${GITHUB_REF#refs/tags/}" >> release_notes.md
          echo "" >> release_notes.md
          echo "### âœ¨ ä¸»è¦ç‰¹æ€§ | Key Features" >> release_notes.md
          echo "- ðŸŽ¯ ä¸“ä¸šçº§ç›´æ’­å½•åˆ¶ | Professional live stream recording" >> release_notes.md
          echo "- ðŸ“ æ™ºèƒ½æ–‡æ¡ˆç®¡ç† | Intelligent transcript management" >> release_notes.md
          echo "- ðŸŽ¨ çŽ°ä»£åŒ–ç•Œé¢è®¾è®¡ | Modern UI design" >> release_notes.md
          echo "- ðŸŒ è·¨å¹³å°æ”¯æŒ | Cross-platform support" >> release_notes.md
          echo "- ðŸ”“ å®Œå…¨å¼€æºå…è´¹ | Completely open source and free" >> release_notes.md
          echo "" >> release_notes.md
          echo "### ðŸ“¦ å®‰è£…è¯´æ˜Ž | Installation Instructions" >> release_notes.md
          echo "è¯·å‚è€ƒé¡¹ç›®READMEæ–‡ä»¶èŽ·å–è¯¦ç»†çš„å®‰è£…å’Œä½¿ç”¨è¯´æ˜Žã€‚" >> release_notes.md
          echo "Please refer to the project README file for detailed installation and usage instructions." >> release_notes.md
          echo "" >> release_notes.md
          echo "```bash" >> release_notes.md
          echo "# å…‹éš†ä»“åº“ | Clone repository" >> release_notes.md
          echo "git clone https://github.com/tmwgsicp/StreamVault-Pro.git" >> release_notes.md
          echo "cd StreamVault-Pro" >> release_notes.md
          echo "" >> release_notes.md
          echo "# å®‰è£…ä¾èµ– | Install dependencies" >> release_notes.md
          echo "pip install -r requirements.txt" >> release_notes.md
          echo "" >> release_notes.md
          echo "# è¿è¡Œåº”ç”¨ | Run application" >> release_notes.md
          echo "python main.py" >> release_notes.md
          echo "```" >> release_notes.md
          echo "" >> release_notes.md
          echo "### ðŸ“ž æŠ€æœ¯æ”¯æŒ | Technical Support" >> release_notes.md
          echo "- ðŸ“§ Email: tmwgsicp@outlook.com" >> release_notes.md
          echo "- ðŸ› Issues: [GitHub Issues](https://github.com/tmwgsicp/StreamVault-Pro/issues)" >> release_notes.md
          echo "- ðŸ’¬ Discussions: [GitHub Discussions](https://github.com/tmwgsicp/StreamVault-Pro/discussions)" >> release_notes.md

      - name: ðŸŽ‰ Create Release
        uses: softprops/action-gh-release@v1
        with:
          name: StreamVault Pro ${{ github.ref_name }}
          body_path: release_notes.md
          draft: false
          prerelease: false
          generate_release_notes: true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  notify:
    name: ðŸ“¢ Send Notifications
    needs: [release]
    runs-on: ubuntu-latest
    if: success()
    steps:
      - name: ðŸ“§ Send Success Notification
        run: |
          echo "âœ… StreamVault Pro ${{ github.ref_name }} has been successfully released!"
          echo "ðŸ”— Release URL: ${{ github.server_url }}/${{ github.repository }}/releases/tag/${{ github.ref_name }}" 