name: 🚀 Build and Release StreamVault Pro

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:
    inputs:
      version:
        description: 'Release version (e.g., v2.0.0)'
        required: true
        default: 'v2.0.0'

permissions:
  contents: write

jobs:
  release:
    name: 🎉 Create Release
    runs-on: ubuntu-latest
    steps:
      - name: 📥 Checkout Repository
        uses: actions/checkout@v4

      - name: 📝 Generate Release Notes
        id: release_notes
        run: |
          echo "## 🚀 StreamVault Pro ${GITHUB_REF#refs/tags/}" >> release_notes.md
          echo "" >> release_notes.md
          echo "### ✨ 主要特性 | Key Features" >> release_notes.md
          echo "- 🎯 专业级直播录制 | Professional live stream recording" >> release_notes.md
          echo "- 📝 智能文案管理 | Intelligent transcript management" >> release_notes.md
          echo "- 🎨 现代化界面设计 | Modern UI design" >> release_notes.md
          echo "- 🌐 跨平台支持 | Cross-platform support" >> release_notes.md
          echo "- 🔓 完全开源免费 | Completely open source and free" >> release_notes.md
          echo "" >> release_notes.md
          echo "### 📦 安装说明 | Installation Instructions" >> release_notes.md
          echo "请参考项目README文件获取详细的安装和使用说明。" >> release_notes.md
          echo "Please refer to the project README file for detailed installation and usage instructions." >> release_notes.md
          echo "" >> release_notes.md
          echo "```bash" >> release_notes.md
          echo "# 克隆仓库 | Clone repository" >> release_notes.md
          echo "git clone https://github.com/tmwgsicp/StreamVault-Pro.git" >> release_notes.md
          echo "cd StreamVault-Pro" >> release_notes.md
          echo "" >> release_notes.md
          echo "# 安装依赖 | Install dependencies" >> release_notes.md
          echo "pip install -r requirements.txt" >> release_notes.md
          echo "" >> release_notes.md
          echo "# 运行应用 | Run application" >> release_notes.md
          echo "python main.py" >> release_notes.md
          echo "```" >> release_notes.md
          echo "" >> release_notes.md
          echo "### 📞 技术支持 | Technical Support" >> release_notes.md
          echo "- 📧 Email: tmwgsicp@outlook.com" >> release_notes.md
          echo "- 🐛 Issues: [GitHub Issues](https://github.com/tmwgsicp/StreamVault-Pro/issues)" >> release_notes.md
          echo "- 💬 Discussions: [GitHub Discussions](https://github.com/tmwgsicp/StreamVault-Pro/discussions)" >> release_notes.md

      - name: 🎉 Create Release
        uses: softprops/action-gh-release@v1
        with:
          name: StreamVault Pro ${{ github.ref_name }}
          body_path: release_notes.md
          draft: false
          prerelease: false
          generate_release_notes: true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  notify:
    name: 📢 Send Notifications
    needs: [release]
    runs-on: ubuntu-latest
    if: success()
    steps:
      - name: 📧 Send Success Notification
        run: |
          echo "✅ StreamVault Pro ${{ github.ref_name }} has been successfully released!"
          echo "🔗 Release URL: ${{ github.server_url }}/${{ github.repository }}/releases/tag/${{ github.ref_name }}" 